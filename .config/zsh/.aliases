#!/usr/bin/env zsh

# shellcheck disable=SC2139

# Remove all previous environment defined aliases
unalias -a

# General aliases
alias c='clear'
alias cat='bat'
alias cp='cp -iv'
alias cwd='pwd | tr -d "\r\n" | pbcopy'
alias df='duf'
alias du='dust -n 30'
alias fd='fd --hidden --exlcude .git'
alias fe='fzf_find_edit'
alias fkill='fzf_kill'
alias ls='ls -lDh --color=always'
alias la='eza -abghHl --group-directories-first'
alias lsd='eza -laDh'
alias mkdir='mkdir -pv'
alias mv='mv -i'
alias path='echo -e ${PATH//:/\\n}'
alias ping='gping'
alias ports='sudo lsof -i -P -n | rg LISTEN'
alias ps='procs'
alias r='exec ${SHELL} -l'
alias rg='rg --hidden --smart-case -g "!.git"'
alias rmds='fd ".DS_Store" -x rm -v {}'
alias sudo='sudo '
alias top='btop'
alias week='date +%V'
alias vim='nvim'
alias zap='rm -i'

# Networking
alias flushdns='sudo dscacheutil -flushcache && killall -HUP mDNSResponder'                  # flushDNS:     Flush out the DNS Cache
alias ipinfo0='ipconfig getpacket en0'                                                       # ipinfo0:      Get info on connections for en0
alias ipinfo1='ipconfig getpacket en1'                                                       # ipinfo1:      Get info on connections for en1
alias localip='ipconfig getifaddr en0'                                                       # localip:      Display the local address
alias lsock='sudo /usr/sbin/lsof -i -P'                                                      # lsock:        Display open sockets
alias lsockt='sudo /usr/sbin/lsof -nP | rg TCP'                                              # lsockt:       Display only open TCP sockets
alias lsocku='sudo /usr/sbin/lsof -nP | rg UDP'                                              # lsocku:       Display only open UDP sockets
alias netcons='lsof -i'                                                                      # netcons:      Show all open TCP/IP sockets
alias nic="ifconfig | pcregrep -M -o '^[^\t:]+:([^\n]|\n\t)*status: active'"                 # nic:          Show active network interfaces
alias op='sudo lsof -i -P'                                                                   # op:           List of open ports
alias openports='sudo lsof -i | rg LISTEN'                                                   # openPorts:    All listening connections
alias pubip='curl -s checkip.dyndns.org | sed -e "s/.*Current IP Address: //" -e "s/<.*$//"' # myip:         Public facing IP Address

# View HTTP traffic
alias httpdump='sudo tcpdump -i en0 -n -s 0 -w - | rg -a -o -P "Host: .*|GET /.*"'
alias sniff='sudo rg -i -t "^(GET|POST) " -d en1 "tcp and port 80"'

# Clean up LaunchServices to remove duplicates in the “Open With” menu
alias cleanupls='/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -kill -r -domain local -domain system -domain user && killall Finder'

# Empty the trash on all mounted volumes and the main HDD
alias emptytrash='sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sqlite3 ~/Library/Preferences/com.apple.LaunchServices.QuarantineEventsV* "delete from LSQuarantineEvent"'

# Upgrade `Homebrew` packages
alias brewupdate='brew update && brew upgrade && brew cleanup; brew cu --all && brew cu --cleanup && brew doctor'

# Get macOS software update
alias sysupdate='sudo softwareupdate -i -a'
